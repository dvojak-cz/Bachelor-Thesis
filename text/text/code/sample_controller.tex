\begin{lstfloat}
\begin{lstlisting}[language=R, caption={UkÃ¡zka CRD device}, label={sample:controller}]
for {
  desired := getDesiredState()
  current := getCurrentState()
  makeChanges(desired, current)
}
\end{lstlisting}
\end{lstfloat}